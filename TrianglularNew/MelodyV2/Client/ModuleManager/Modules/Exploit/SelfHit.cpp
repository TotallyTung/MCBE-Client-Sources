#include "SelfHit.h"
#include <cmath> // for std::atan2()
#include "../Exploit/AntiDesync.h"
#include "../../../Client.h"
bool swing = false;
SelfHit::SelfHit() : Module("SelfHit", "NULL", Category::EXPLOIT) {
	boolsetting("Swing", "NULL", &swing);
}
void SelfHit::onNormalTick(Actor* actor) {
#include "../Exploit/AntiDesync.h"
#include "../../../Client.h"
	static AntiDesync* AntiDesyncMod = (AntiDesync*)client->moduleMgr->getModule("AntiDesync");
	if (AntiDesyncMod->isEnabled()) {
			if (mc.getLocalPlayer()->getItemUseDuration() > 0) return;
	}
	auto localPlayer = mc.getLocalPlayer();
	auto plrInv = localPlayer->getPlayerInventory();
	auto inv = plrInv->inventory;
	auto gm = mc.getGameMode();
	auto region = localPlayer->dimension->blockSource;
	auto level = localPlayer->getLevel();
	gm->attack(localPlayer);
	if (swing) {
		localPlayer->swing();
	}
}

void SelfHit::onSendPacket(Packet* packet, bool& shouldCancel) {
}

void SelfHit::onImGuiRender(ImDrawList* d) {
}